import CreatePostForm, { TPostData } from '@/components/CreatePostForm';
import PostList from '@/components/PostList';
import usePost from '@/hooks/usePost';
import withAuth from '@/services/withAuth/withAuth';
import Head from 'next/head';
import { useState } from 'react';

 function Home() {
  const { 
      posts,
      deletePost,
      editPost,
      createPost
  } = usePost()

  const onSubmit = async(data: TPostData) => {
    await createPost(data)
  }

  return (
    <>
      <Head>
        <title>Home - CodeLeap Network</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
      </Head>
      <main>
        <CreatePostForm
          title="What's on your mind?"
          onSubmit={onSubmit}
        />
        <PostList
          posts={posts}
          deletePost={deletePost}
          editPost={editPost}
        />
      </main>
    </>
  )
}

export default withAuth(Home)
